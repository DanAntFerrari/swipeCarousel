
/* =========================================================
 * [carousel.min.js]
 * Project:       swipeCarousel_1.0.0
 * Description:   javascript assets
 * Last change:   10/30/2014 10:12:26 am
 * Copyright:     2014 Wip Italia S.r.l.
 * Author URI:    http://www.wipitalia.it/
 * ========================================================= *
 * this file is minimized and inport by script.html include
 * ========================================================= */
   ;(function($,doc,win){"use strict";$.swipeCarosel=function(element,options){var defaults={slideshow:{state:false,timerInt:5000,stopLoop:3},nav:{state:true,arrow:true,keyArrow:false,spot:true},item:{forRow:1}};var options=$.extend(true,{},defaults,options);var self=this;var elementName=self.element;self.$element=$(element);var element=$(element);self.$element.data("swipeCarousel",self);var container=$(">ul",element);var panes=$(">ul>li",element);var pane_width=0;var pane_count=panes.length;var current_pane=0;var isIE=document.all&&document.compatMode;var slideTimer;if(options.item.forRow>=2){pane_count=pane_count-(options.item.forRow-1);}
this.init=function(){self.setPaneDimensions();if(pane_count>1){if(options.nav.state){self.navigation();}
if(options.slideshow.state){self.sliderstartTimer();}}
$(window).on("resize orientationchange",function(){clearInterval(slideTimer);self.setPaneDimensions();});$('.menu-trigger').on("click",function(){clearInterval(slideTimer);});};this.setPaneDimensions=function(){container.add('.carousel .nav, .carousel .indicators').addClass('invisible');element.addClass('loading');pane_width=(element.innerWidth())/options.item.forRow;panes.each(function(){$(this).width(pane_width);});var container_width=pane_width*(pane_count);if(options.item.forRow>=2){container_width=pane_width*(pane_count+(options.item.forRow-1));}
container.animate({width:container_width},50,function(){element.removeClass('loading');container.add('.carousel .nav, .carousel .indicators').delay(100).removeClass('invisible');});};this.navigation=function(){element.addClass('withnav');if(options.nav.arrow){var left="<a class='nav prev hidden' rel='prev' href='javascript:void(0);'> <span class='icon-sgm-icon-arrowleft' aria-hidden='true'></span></a>";var right="<a class='nav next' rel='next' href='javascript:void(0);'><span class='icon-sgm-icon-arrowright' aria-hidden='true'></span></a>";$(left).prependTo(element);$(right).appendTo(element);element.on('click','.nav',function(e,simulated){if(!simulated){clearInterval(slideTimer);}
if($(this).hasClass('prev')){self.prev();}else{self.next();}});}
if(options.nav.keyArrow){element.bind().keyup(function(e){if(e.keyCode==39){self.next();return false;}else if(e.keyCode==37){self.prev();return false;};});}
if(options.nav.spot){var indicators="<ul class='indicators'>";for(var i=0;i<pane_count;i++){$(this).data('ind','ind_'+i);indicators+='<li class="spot" data-index="'+i+'"><a href="javascript:void(0);"></a></li>';}
indicators+="</ul>";$(indicators).appendTo(element);var leftMargin=$('.indicators').outerWidth()/2;$('.indicators').css('margin-left',-leftMargin+'px');element.find('.indicators li:eq(0)').addClass('active');element.on('click','.spot',function(e,simulated){if(!simulated){clearInterval(slideTimer);}
var item=$(this).data('index');self.goToIndex(item);});}};self.sliderstartTimer=function(){var slideCounter=1,i_slide=1,i_loop=1;if(slideCounter<pane_count){slideTimer=setInterval(function(){if(slideCounter==pane_count){self.goToIndex(0);if(options.slideshow.stopLoop==i_loop){clearInterval(slideTimer);}else{slideCounter=1;}
i_loop++}else{self.goToIndex(slideCounter);slideCounter++;}
i_slide++},4000);}};this.showPane=function(index){index=Math.max(0,Math.min(index,pane_count-1));current_pane=index;var offset=-((100/pane_count)*current_pane);setContainerOffset(offset,true);element.find('.indicators li:eq('+(current_pane)+')').addClass('active');};function setContainerOffset(percent,animate){container.removeClass("animate");if(animate){container.addClass("animate");}
if(Modernizr.csstransforms3d){var px=((pane_width*pane_count)/100)*percent;container.css("transform",'translate3d('+px+'px,0,0) scale3d(1,1,1)');}
else if(Modernizr.csstransforms){var px=((pane_width*pane_count)/100)*percent;container.css("transform","translate("+px+"px,0)");}
else{var px=((pane_width*pane_count)/100)*percent;container.css("left",px+"px");}}
this.next=function(){self.updatenav(current_pane,'next');return this.showPane(current_pane+1,true);};this.prev=function(){self.updatenav(current_pane,'prev');return this.showPane(current_pane-1,true);};this.goToIndex=function(index){self.updatenav(current_pane,index);return this.showPane(index,true);};this.updatenav=function(index,direction){element.find('.nav').removeClass('hidden');element.find('.indicators li').removeClass('active');switch(direction){case'prev':if(current_pane<=1){element.find('.prev').addClass('hidden');}
break;case'next':if(current_pane>=(pane_count-2)){element.find('.next').addClass('hidden');}
break;default:if(direction==0){element.find('.prev').addClass('hidden');}else if(direction==(pane_count-1)){element.find('.next').addClass('hidden');}
break;}};function handleHammer(ev,simulated){if(!simulated){clearInterval(slideTimer);}
switch(ev.type){case'dragright':case'dragleft':ev.gesture.preventDefault();var pane_offset=-(100/pane_count)*current_pane;var drag_offset=((100/pane_width)*ev.gesture.deltaX)/pane_count;if((current_pane==0&&ev.gesture.direction==Hammer.DIRECTION_RIGHT)||(current_pane==pane_count-1&&ev.gesture.direction==Hammer.DIRECTION_LEFT)){drag_offset*=.4;}
setContainerOffset(drag_offset+pane_offset);break;case'swipeleft':ev.gesture.preventDefault();self.next();ev.gesture.stopDetect();break;case'swiperight':ev.gesture.preventDefault();self.prev();ev.gesture.stopDetect();break;case'release':if(Math.abs(ev.gesture.deltaX)>pane_width/2){if(ev.gesture.direction=='right'){self.prev();}else{self.next();}}
else{self.showPane(current_pane,true);}
break;}}
this.init();if(pane_count>1){if(!isIE){element.hammer().on("release dragleft dragright swipeleft swiperight",handleHammer);}};};$.fn.swipeCarousel=function(options){return this.each(function(){(new $.swipeCarosel(this,options));});};$.fn.getcasio_carousel=function(){this.data("swipeCarousel");};})(jQuery,document,window);